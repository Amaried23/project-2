<div class="container">
    <div class="section">

       <!--   filter Section   -->
      <div class="row">
        <div class="col s12">
          <div class="filterForm">
            <form>
            <div class="row">
              <h5>Filter Results</h5>
              <hr class="style">
              <div class="input-field col s6">
                <input id="filterAddress" type="text" class="validate">
                <label for="filterAddress">Your Address</label>
              </div>

              <div class="input-field col s3">
                <input id="checkIn" type="text" class="datepicker">
                <label for="checkIn">Check In</label>
              </div>

              <div class="input-field col s3">
                <input id="checkOut" type="text" class="datepicker">
                <label for="checkOut">Check Out</label>
              </div>
            </div>

            <div class="row">
              <div class="input-field col s3">
                <input id="guestNum" type="number" name="quantity" min="1" max="20">
                <label for="guestNum">Number of Guests</label>
              </div>
              <div class="col s3 checkbox">
                <input type="checkbox" id="hasPets">
                <label for="hasPets">Pets?</label>
              </div>
              <div class="input-field col s3 right">
                 <a href="#" class="waves-effect waves-light btn filterButton">Filter</a>
              </div>
            </div>
          </form> 
          </div>
        </div>
      </div>
    </div>
  </div>
<h2>Total Pages:{{ pages }}</h2>

<a class="page-back" href="/listings/back">Previous Page</a>
<a class="page-next" href="/listings/next">Next Page</a>

{{#each hosts}}
<div class="row">
  <div class="col s12 m7">
    <div class="card horizontal">
      <div class="card-image">
        <img src="http://materializecss.com/images/sample-1.jpg">
        <span class="card-title">ID : {{ id }}</span>
      </div>
      <div class="card-content">
        <p>{{first_name}} {{ last_name }}</p>
      </div>
      <div class="card-action">
        <a href="#">This is a link </a>
      </div>
    </div>
  </div>
</div>
{{/each}}

{{#sections 'footer'}}
<script>
  console.log('inig')


  $(document).ready(function(){
    function page(page) {
      this.path = page
    }

    $('a').on('click', function (e) {
      e.preventDefault()
      var link = e.target.classList;
      let referral = window.location.href;
      console.log(referral)
      let paginate = new page(referral);
      paginate.currentPage = function () {
        return this.path;
      }

      paginate.url = function (link, newPage, queryString) {
        console.log(link + "/listings/" + newPage + "?" + queryString)
        window.location = link + "/listings/" + newPage + "?" + queryString
      }

      paginate.nextPage = function () {
        var url = this.currentPage();
        var regExp = /(\/([0-9]+)\?)/;
        var pageNum = regExp.exec(url)[2];

        regExp = /(\?(.+))/;
        var queryString = regExp.exec(url)[2];
        link = window.location.origin;

        var newPage = Number(pageNum) + 1;

        this.url(link, newPage, queryString);
      }

      paginate.prevPage = function () {
        var url = this.currentPage();
        var regExp = /(\/([0-9]+)\?)/;
        var pageNum = regExp.exec(url)[2];

        regExp = /(\?(.+))/;
        var queryString = regExp.exec(url)[2];
        link = window.location.origin;

        var newPage = Number(pageNum) - 1;

        this.url(link, newPage, queryString);
      }

      for (var i = 0; i < link.length; i++) {
        if (link[i] === 'page-next') {
          paginate.nextPage()
        } else if (link[i] === 'page-back') {
          paginate.prevPage()
        }
      }

    });
  });

        var autocomplete = new google.maps.places.Autocomplete(input);



</script>

<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCH-6r9WrlUwy1swTIHIYFrm4IcXcjZDEk&callback=initMap">
      </script>

{{/sections }}

